function r(e,t){chrome.storage.local.set({[e]:t})}function g(){chrome.storage.local.get(["deleteThreshold","hideCrossposts","lessAggressivePruning","debugMode"],e=>{let t=document.getElementById("persistentStorage"),n=document.getElementById("persistentStorageLabel"),c=document.getElementById("crosspostCheckbox"),o=document.getElementById("pruneCheckbox"),d=document.getElementById("debugModeCheckbox"),s=e.deleteThreshold??1;t.value=s.toString(),n.textContent=u(s),c.checked=e.hideCrossposts??!0,o.checked=e.lessAggressivePruning??!1,d.checked=e.debugMode??!1})}function u(e){return["6 hours","1 day","2 days","1 week","2 weeks","Never"][e]??"Unknown"}function m(){let e=document.getElementById("persistentStorage"),t=document.getElementById("persistentStorageLabel"),n=document.getElementById("crosspostCheckbox"),c=document.getElementById("pruneCheckbox"),o=document.getElementById("debugModeCheckbox"),d=document.getElementById("resetButton"),s=document.getElementById("deleteStorage"),i=document.getElementById("trackedEntries"),h=document.getElementById("storageSize");e.addEventListener("input",()=>{let a=parseInt(e.value);t.textContent=u(a),r("deleteThreshold",a)}),n.addEventListener("change",()=>{r("hideCrossposts",n.checked)}),c.addEventListener("change",()=>{r("lessAggressivePruning",c.checked)}),o.addEventListener("change",()=>{r("debugMode",o.checked)}),d.addEventListener("click",()=>{chrome.storage.local.clear(()=>{g()})}),s.addEventListener("click",()=>{chrome.storage.local.remove(["seenPostsSubreddit","seenPostsID"],()=>{l()})}),l()}function l(){let e=document.getElementById("trackedEntries"),t=document.getElementById("storageSize");chrome.storage.local.get(["seenPostsSubreddit","seenPostsID"],n=>{let o=Object.keys(n.seenPostsID||{}).length;e.textContent=o.toString();let s=(JSON.stringify(n).length/1024).toFixed(2);t.textContent=`${s} KB`})}document.addEventListener("DOMContentLoaded",()=>{g(),m()});
