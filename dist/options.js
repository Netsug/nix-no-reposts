function r(e,t){chrome.storage.local.set({[e]:t})}function u(){chrome.storage.local.get(["deleteThreshold","hideCrossposts","lessAggressivePruning","debugMode","incognito"],e=>{let t=document.getElementById("persistentStorage"),n=document.getElementById("persistentStorageLabel"),o=document.getElementById("crosspostCheckbox"),d=document.getElementById("pruneCheckbox"),s=document.getElementById("debugModeCheckbox"),l=document.getElementById("incognitoModeCheckbox"),c=e.deleteThreshold??2;t.value=c.toString(),n.textContent=i(c),o.checked=e.hideCrossposts??!1,d.checked=e.lessAggressivePruning??!1,s.checked=e.debugMode??!1,l.checked=e.incognito??!1})}function i(e){return["6 hours","1 day","2 days","1 week","2 weeks","Never"][e]??"Unknown"}function m(){let e=document.getElementById("persistentStorage"),t=document.getElementById("persistentStorageLabel"),n=document.getElementById("crosspostCheckbox"),o=document.getElementById("incognitoModeCheckbox"),d=document.getElementById("pruneCheckbox"),s=document.getElementById("debugModeCheckbox"),l=document.getElementById("resetButton"),c=document.getElementById("deleteStorage");e.addEventListener("input",()=>{let a=parseInt(e.value);t.textContent=i(a),r("deleteThreshold",a)}),n.addEventListener("change",()=>{r("hideCrossposts",n.checked)}),o.addEventListener("change",()=>{r("incognito",o.checked)}),d.addEventListener("change",()=>{r("lessAggressivePruning",d.checked)}),s.addEventListener("change",()=>{r("debugMode",s.checked)}),l.addEventListener("click",()=>{chrome.storage.local.clear(()=>{u()})}),c.addEventListener("click",()=>{chrome.storage.local.remove(["seenPostsSubreddit","seenPostsID"],()=>{g()})}),g()}function g(){let e=document.getElementById("trackedEntries"),t=document.getElementById("storageSize");chrome.storage.local.get(["seenPostsSubreddit","seenPostsID"],n=>{let o=Object.keys(n.seenPostsSubreddit||{}).length,s=Object.keys(n.seenPostsID||{}).length+o;e.textContent=s.toString();let c=(JSON.stringify(n).length/1024).toFixed(2);t.textContent=`${c} KB`})}document.addEventListener("DOMContentLoaded",()=>{u(),m()});
