function c(e,n){chrome.storage.local.set({[e]:n})}function E(){chrome.storage.local.get(["deleteThreshold","hideCrossposts","lessAggressivePruning","debugMode","incognito"],e=>{let n=document.getElementById("persistentStorage"),o=document.getElementById("persistentStorageLabel"),a=document.getElementById("crosspostCheckbox"),r=document.getElementById("pruneCheckbox"),g=document.getElementById("debugModeCheckbox"),i=document.getElementById("incognitoModeCheckbox"),d=e.deleteThreshold??2;n.value=d.toString(),o.textContent=k(d),a.checked=e.hideCrossposts??!1,r.checked=e.lessAggressivePruning??!1,g.checked=e.debugMode??!1,i.checked=e.incognito??!1})}function k(e){return["6 hours","1 day","2 days","1 week","2 weeks","Never"][e]??"Unknown"}function b(){let e=document.getElementById("persistentStorage"),n=document.getElementById("persistentStorageLabel"),o=document.getElementById("crosspostCheckbox"),a=document.getElementById("incognitoModeCheckbox"),r=document.getElementById("pruneCheckbox"),g=document.getElementById("debugModeCheckbox"),i=document.getElementById("resetButton"),d=document.getElementById("deleteStorage");e.addEventListener("input",()=>{let l=parseInt(e.value);n.textContent=k(l),c("deleteThreshold",l)}),o.addEventListener("change",()=>{c("hideCrossposts",o.checked)}),a.addEventListener("change",l=>{let t=l.target;if(t.checked){let s=document.getElementById("incognitoWarningModal"),u=document.getElementById("cancelButton"),m=document.getElementById("proceedButton");s.classList.remove("hidden"),u.addEventListener("click",()=>{t.checked=!1,s.classList.add("hidden")}),m.addEventListener("click",()=>{c("incognito",t.checked),s.classList.add("hidden")})}else c("incognito",t.checked)}),r.addEventListener("change",()=>{c("lessAggressivePruning",r.checked)}),g.addEventListener("change",l=>{let t=l.target;if(t.checked){let s=document.getElementById("debugModeWarningModal"),u=document.getElementById("debugCancelButton"),m=document.getElementById("debugProceedButton");s.classList.remove("hidden"),u.addEventListener("click",()=>{t.checked=!1,s.classList.add("hidden")}),m.addEventListener("click",()=>{c("debugMode",t.checked),s.classList.add("hidden")})}else c("debugMode",t.checked)}),i.addEventListener("click",()=>{chrome.storage.local.clear(()=>{E()})}),d.addEventListener("click",()=>{chrome.storage.local.remove(["seenPostsSubreddit","seenPostsID"],()=>{h()})}),h()}function h(){let e=document.getElementById("trackedEntries"),n=document.getElementById("storageSize");chrome.storage.local.get(["seenPostsSubreddit","seenPostsID"],o=>{let a=Object.keys(o.seenPostsSubreddit||{}).length,g=Object.keys(o.seenPostsID||{}).length+a;e.textContent=g.toString();let d=(JSON.stringify(o).length/1024).toFixed(2);n.textContent=`${d} KB`})}document.addEventListener("DOMContentLoaded",()=>{E(),b()});
