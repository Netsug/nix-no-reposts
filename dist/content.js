var W=Object.create;var j=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var G=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty;var K=(f,l)=>()=>(l||f((l={exports:{}}).exports,l),l.exports);var N=(f,l,v,p)=>{if(l&&typeof l=="object"||typeof l=="function")for(let c of B(l))!J.call(f,c)&&c!==v&&j(f,c,{get:()=>l[c],enumerable:!(p=Y(l,c))||p.enumerable});return f};var Q=(f,l,v)=>(v=f!=null?W(G(f)):{},N(l||!f||!f.__esModule?j(v,"default",{value:f,enumerable:!0}):v,f));var F=K((k,M)=>{(function(f){"use strict";function l(e,i){var t=(e&65535)+(i&65535),d=(e>>16)+(i>>16)+(t>>16);return d<<16|t&65535}function v(e,i){return e<<i|e>>>32-i}function p(e,i,t,d,g,m){return l(v(l(l(i,e),l(d,m)),g),t)}function c(e,i,t,d,g,m,y){return p(i&t|~i&d,e,i,g,m,y)}function a(e,i,t,d,g,m,y){return p(i&d|t&~d,e,i,g,m,y)}function b(e,i,t,d,g,m,y){return p(i^t^d,e,i,g,m,y)}function u(e,i,t,d,g,m,y){return p(t^(i|~d),e,i,g,m,y)}function h(e,i){e[i>>5]|=128<<i%32,e[(i+64>>>9<<4)+14]=i;var t,d,g,m,y,r=1732584193,o=-271733879,n=-1732584194,s=271733878;for(t=0;t<e.length;t+=16)d=r,g=o,m=n,y=s,r=c(r,o,n,s,e[t],7,-680876936),s=c(s,r,o,n,e[t+1],12,-389564586),n=c(n,s,r,o,e[t+2],17,606105819),o=c(o,n,s,r,e[t+3],22,-1044525330),r=c(r,o,n,s,e[t+4],7,-176418897),s=c(s,r,o,n,e[t+5],12,1200080426),n=c(n,s,r,o,e[t+6],17,-1473231341),o=c(o,n,s,r,e[t+7],22,-45705983),r=c(r,o,n,s,e[t+8],7,1770035416),s=c(s,r,o,n,e[t+9],12,-1958414417),n=c(n,s,r,o,e[t+10],17,-42063),o=c(o,n,s,r,e[t+11],22,-1990404162),r=c(r,o,n,s,e[t+12],7,1804603682),s=c(s,r,o,n,e[t+13],12,-40341101),n=c(n,s,r,o,e[t+14],17,-1502002290),o=c(o,n,s,r,e[t+15],22,1236535329),r=a(r,o,n,s,e[t+1],5,-165796510),s=a(s,r,o,n,e[t+6],9,-1069501632),n=a(n,s,r,o,e[t+11],14,643717713),o=a(o,n,s,r,e[t],20,-373897302),r=a(r,o,n,s,e[t+5],5,-701558691),s=a(s,r,o,n,e[t+10],9,38016083),n=a(n,s,r,o,e[t+15],14,-660478335),o=a(o,n,s,r,e[t+4],20,-405537848),r=a(r,o,n,s,e[t+9],5,568446438),s=a(s,r,o,n,e[t+14],9,-1019803690),n=a(n,s,r,o,e[t+3],14,-187363961),o=a(o,n,s,r,e[t+8],20,1163531501),r=a(r,o,n,s,e[t+13],5,-1444681467),s=a(s,r,o,n,e[t+2],9,-51403784),n=a(n,s,r,o,e[t+7],14,1735328473),o=a(o,n,s,r,e[t+12],20,-1926607734),r=b(r,o,n,s,e[t+5],4,-378558),s=b(s,r,o,n,e[t+8],11,-2022574463),n=b(n,s,r,o,e[t+11],16,1839030562),o=b(o,n,s,r,e[t+14],23,-35309556),r=b(r,o,n,s,e[t+1],4,-1530992060),s=b(s,r,o,n,e[t+4],11,1272893353),n=b(n,s,r,o,e[t+7],16,-155497632),o=b(o,n,s,r,e[t+10],23,-1094730640),r=b(r,o,n,s,e[t+13],4,681279174),s=b(s,r,o,n,e[t],11,-358537222),n=b(n,s,r,o,e[t+3],16,-722521979),o=b(o,n,s,r,e[t+6],23,76029189),r=b(r,o,n,s,e[t+9],4,-640364487),s=b(s,r,o,n,e[t+12],11,-421815835),n=b(n,s,r,o,e[t+15],16,530742520),o=b(o,n,s,r,e[t+2],23,-995338651),r=u(r,o,n,s,e[t],6,-198630844),s=u(s,r,o,n,e[t+7],10,1126891415),n=u(n,s,r,o,e[t+14],15,-1416354905),o=u(o,n,s,r,e[t+5],21,-57434055),r=u(r,o,n,s,e[t+12],6,1700485571),s=u(s,r,o,n,e[t+3],10,-1894986606),n=u(n,s,r,o,e[t+10],15,-1051523),o=u(o,n,s,r,e[t+1],21,-2054922799),r=u(r,o,n,s,e[t+8],6,1873313359),s=u(s,r,o,n,e[t+15],10,-30611744),n=u(n,s,r,o,e[t+6],15,-1560198380),o=u(o,n,s,r,e[t+13],21,1309151649),r=u(r,o,n,s,e[t+4],6,-145523070),s=u(s,r,o,n,e[t+11],10,-1120210379),n=u(n,s,r,o,e[t+2],15,718787259),o=u(o,n,s,r,e[t+9],21,-343485551),r=l(r,d),o=l(o,g),n=l(n,m),s=l(s,y);return[r,o,n,s]}function S(e){var i,t="",d=e.length*32;for(i=0;i<d;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}function D(e){var i,t=[];for(t[(e.length>>2)-1]=void 0,i=0;i<t.length;i+=1)t[i]=0;var d=e.length*8;for(i=0;i<d;i+=8)t[i>>5]|=(e.charCodeAt(i/8)&255)<<i%32;return t}function E(e){return S(h(D(e),e.length*8))}function w(e,i){var t,d=D(e),g=[],m=[],y;for(g[15]=m[15]=void 0,d.length>16&&(d=h(d,e.length*8)),t=0;t<16;t+=1)g[t]=d[t]^909522486,m[t]=d[t]^1549556828;return y=h(g.concat(D(i)),512+i.length*8),S(h(m.concat(y),640))}function A(e){var i="0123456789abcdef",t="",d,g;for(g=0;g<e.length;g+=1)d=e.charCodeAt(g),t+=i.charAt(d>>>4&15)+i.charAt(d&15);return t}function C(e){return unescape(encodeURIComponent(e))}function T(e){return E(C(e))}function q(e){return A(T(e))}function O(e,i){return w(C(e),C(i))}function z(e,i){return A(O(e,i))}function $(e,i,t){return i?t?O(i,e):z(i,e):t?T(e):q(e)}typeof define=="function"&&define.amd?define(function(){return $}):typeof M=="object"&&M.exports?M.exports=$:f.md5=$})(k)});var _=Q(F(),1),L={},R={},H=2*24*60*60*1e3,V=!0,P=!0;function I(f){return(0,_.default)(f)}async function X(){let f=Date.now(),{seenPostsSubreddit:l={},seenPostsID:v={}}=await new Promise(u=>chrome.storage.local.get(["seenPostsSubreddit","seenPostsID"],u)),p={},c={};for(let[u,h]of Object.entries(l))f-h.timestamp<H?p[u]=h:P&&console.log(`Removing expired subreddit entry: ${u}`);for(let[u,h]of Object.entries(v))f-h.timestamp<H?c[u]=h:P&&console.log(`Removing expired postID entry: ${u}`);let a=Object.keys(p).length!==Object.keys(l).length,b=Object.keys(c).length!==Object.keys(v).length;a&&await new Promise(u=>chrome.storage.local.set({seenPostsSubreddit:p},u)),b&&await new Promise(u=>chrome.storage.local.set({seenPostsID:c},u))}function U(){let f=Date.now(),l=document.querySelectorAll("article"),v=!1,p=!1;l.forEach(c=>{let a=c.querySelector("shreddit-post");if(!a)return;let b=!1;V&&(b=Z(a),P&&b&&console.log("Filtered post based on crosspost"));let u,h,S;P?(u=a.getAttribute("content-href")?.toLowerCase()||"",h=a.getAttribute("author")?.toLowerCase()||"",S=a.getAttribute("subreddit-name")?.toLowerCase()||""):(u=I(a.getAttribute("content-href")?.toLowerCase()||""),h=I(a.getAttribute("author")?.toLowerCase()||""),S=I(a.getAttribute("subreddit-name")?.toLowerCase()||""));let D;P?D=`${u}|${h}`:D=I(`${u}|${h}`);let E=L[D];E?E.subreddit!==S&&(b=!0,P&&console.log(`Filtered duplicate from another subreddit: ${S}`)):(L[D]={subreddit:S,timestamp:f},v=!0);let w,A;P?(w=a.getAttribute("post-title")||"",A=a.getAttribute("id")||"",D=`${w}|${h}`):(w=I(a.getAttribute("post-title")||""),A=I(a.getAttribute("id")||""),D=I(`${w}|${h}`));let C=R[D];C?C.postID!=A&&(b=!0,P&&console.log(`Filtered duplicate with similar title: ${w}`)):(R[D]={postID:A,timestamp:f},p=!0),b&&(c.style.display="none")}),v&&chrome.storage.local.set({seenPostsSubreddit:L}),p&&chrome.storage.local.set({seenPostsID:R})}function Z(f){return f?.hasAttribute("post-type")&&f.getAttribute("post-type")?.toLowerCase()==="crosspost"}async function x(){await X(),U();let f;new MutationObserver(()=>{clearTimeout(f),f=window.setTimeout(()=>{U()},50)}).observe(document.body,{childList:!0,subtree:!0})}x();
